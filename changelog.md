- Use has component instead of comparing get with null
- Use Fabric's Transaction system correctly in energy implementations